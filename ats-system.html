<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI CV Analyzer v12</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4.1.1/dist/tesseract.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
body { margin:0; padding:0; font-family:'Segoe UI', sans-serif; overflow-x:hidden; background:#0d0d0d; }
#bgCanvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:-2; background:#0d0d0d; }

/* Promo Pop-up */
#promoScreen {
  position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;
  z-index:9999; opacity:0; transform:scale(0.7); transition: all 0.6s ease;
}
#promoScreen.show { opacity:1; transform:scale(1); }
#promoPopup {
  position:relative;width:80%;max-width:800px;background:#000;border-radius:15px;overflow:hidden;
  box-shadow:0 0 20px #0ff, 0 0 40px #0ff inset, 0 0 60px #0ff inset;
  animation: glowPopup 2s infinite alternate;
}
@keyframes glowPopup {
  0% { box-shadow:0 0 20px #0ff, 0 0 40px #0ff inset, 0 0 60px #0ff inset; }
  50% { box-shadow:0 0 35px #0ff, 0 0 60px #0ff inset, 0 0 80px #0ff inset; }
  100% { box-shadow:0 0 20px #0ff, 0 0 40px #0ff inset, 0 0 60px #0ff inset; }
}
#promoPopup video { width:100%; border-radius:15px 15px 0 0; }
#promoPopup div { padding:15px;text-align:center;color:#0ff; }
#promoPopup h2 { margin:0 0 10px 0; }
#promoPopup p { margin:0 0 10px 0; color:#f55; }
#skipBtn { padding:8px 15px; background:#0ff; color:#000; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }

/* Cookie Consent */
#cookieConsent { position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#111;padding:15px 25px;border-radius:10px;color:#0ff;box-shadow:0 0 10px #0ff;z-index:10000; display:none; }
#cookieConsent p { margin:0; font-size:1em; }
#cookieConsent button { margin-top:10px;padding:8px 12px;background:#0ff;color:#000;border:none;border-radius:5px;cursor:pointer; }

/* Container */
.container { position:relative; max-width:1000px; margin:auto; background: rgba(17,17,17,0.9); padding:20px; box-shadow:0 0 20px rgba(0,255,255,0.2); border-radius:12px; margin-top:30px; display:none; }
h1 { color:#00f5ff; text-align:center; margin-bottom:20px; text-shadow:0 0 10px #00f5ff; }
input[type=file] { margin-bottom:15px; width:100%; padding:8px; font-size:1em; border-radius:5px; border:1px solid #00f5ff; background:#222; color:#fff; }
button { padding:10px 15px; background:#00f5ff; color:#000; border:none; cursor:pointer; border-radius:5px; margin-bottom:10px; font-weight:bold; }
button:disabled { background:#333; cursor:not-allowed; }

/* Cards */
.cards { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin-top:20px; }
.card { background:#111; padding:15px; border-radius:10px; flex:1 1 300px; box-shadow:0 0 15px rgba(0,255,255,0.3); opacity:0; transform:translateY(50px); transition: all 0.8s ease, box-shadow 1s ease-in-out; }
.card.show {opacity:1; transform:translateY(0);}
.card.accepted { animation: pulseAccept 1s infinite alternate; }
.card.rejected { animation: pulseReject 1s infinite alternate; }
@keyframes pulseAccept { 0%{box-shadow:0 0 15px #0f0;}50%{box-shadow:0 0 25px #0f0;}100%{box-shadow:0 0 15px #0f0;} }
@keyframes pulseReject { 0%{box-shadow:0 0 15px #f00;}50%{box-shadow:0 0 25px #f00;}100%{box-shadow:0 0 15px #f00;} }
.card h3 { margin:0 0 10px 0; color:#00f5ff;}
.phone { font-weight:bold; color:#0ff; margin-top:5px; }
.status { font-weight:bold; margin-top:5px; }
.status.accept { color:#0f0; }
.status.reject { color:#f00; }
.strongSkill { font-weight:bold; color:#0ff; }
.specialty { font-weight:bold; margin-top:5px; color:#0ff; }
.score { font-weight:bold; margin-top:5px; color:#ff0; }
.loader {display:none; text-align:center; margin:20px; font-size:1.2em; color:#00f5ff; text-shadow:0 0 10px #0ff; animation: blink 1.2s infinite;}
@keyframes blink {0%,50%,100%{opacity:1;}25%,75%{opacity:0.2;}}
@media(max-width:600px){.cards{flex-direction:column;align-items:center;}}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>

<!-- Promo Pop-up -->
<div id="promoScreen">
  <div id="promoPopup">
    <video id="promoVideo" autoplay muted playsinline>
      <source src="https://l.top4top.io/m_357976fbq1.mp4" type="video/mp4">
    </video>
    <div>
      <h2>üöÄ Professional ATS AI CV Analyzer</h2>
      <p>‚ö†Ô∏è This AI ATS system is highly accurate ‚Äî it cannot be tricked!</p>
      <button id="skipBtn">Skip Video</button>
    </div>
  </div>
</div>

<!-- Cookie Consent -->
<div id="cookieConsent">
  <p>This website uses cookies to ensure full functionality. Please accept to continue.</p>
  <button onclick="acceptCookies()">Accept</button>
</div>

<!-- Main Container -->
<div class="container">
<h1>ü§ñ AI CV Analyzer v12</h1>
<p>Upload PDF CVs. The AI scans multiple specialties with realistic evaluation.</p>
<input type="file" id="pdfFiles" accept="application/pdf" multiple>
<button id="analyzeBtn" onclick="analyzeBatch()">Analyze CVs</button>
<button id="downloadExcel" style="display:none;" onclick="downloadExcel()">Download Excel</button>
<div id="loader" class="loader">ü§ñ AI is analyzing your CVs... Processing...</div>
<div class="cards" id="resultsCards"></div>
</div>

<!-- Audios -->
<audio id="bgAudio" autoplay loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>
<audio id="soundAccept">
  <source src="https://freesound.org/data/previews/273/273183_5121236-lq.mp3" type="audio/mpeg">
</audio>
<audio id="soundReject">
  <source src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3" type="audio/mpeg">
</audio>
<audio id="aiSound">
  <source src="https://freesound.org/data/previews/503/503464_10226567-lq.mp3" type="audio/mpeg">
</audio>

<script>
// Background animation
const canvas=document.getElementById('bgCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
let lines=[];
for(let i=0;i<50;i++){ lines.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, len:50+Math.random()*100, speed:1+Math.random()*2}); }
function animateBG(){ ctx.fillStyle='rgba(13,13,13,0.3)'; ctx.fillRect(0,0,canvas.width,canvas.height); ctx.strokeStyle='#0ff'; ctx.lineWidth=1; lines.forEach(l=>{ ctx.beginPath(); ctx.moveTo(l.x,l.y); ctx.lineTo(l.x,l.y+l.len); ctx.stroke(); l.y+=l.speed; if(l.y>canvas.height) l.y=-l.len; }); requestAnimationFrame(animateBG);}
animateBG();
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

// Promo Pop-up Logic
const promoScreen = document.getElementById('promoScreen');
const promoVideo = document.getElementById('promoVideo');
const skipBtn = document.getElementById('skipBtn');
const container = document.querySelector('.container');
const aiSound = document.getElementById('aiSound');
const bgAudio = document.getElementById('bgAudio');

function showMain(){
    promoScreen.classList.remove('show');
    aiSound.play();
    setTimeout(()=>{
        promoScreen.style.display='none';
        container.style.display='block';
        bgAudio.play();
    }, 600);
}

if(!sessionStorage.getItem('promoShown')){
    promoScreen.style.display='flex';
    setTimeout(()=>{ promoScreen.classList.add('show'); aiSound.play(); }, 50);
    sessionStorage.setItem('promoShown','true');
    promoVideo.onended = showMain;
    skipBtn.onclick = showMain;
} else { container.style.display='block'; bgAudio.play(); }

// Cookie consent
let cookiesAccepted=false;
function acceptCookies(){ cookiesAccepted=true; document.getElementById('cookieConsent').style.display='none'; }

// PDF + AI CV Analyzer
pdfjsLib.GlobalWorkerOptions.workerSrc='https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
const specialties=["IT / Software Development","Web & Mobile Development","Data Science & Analytics","AI / Machine Learning","Cybersecurity","Project Management","Human Resources / HR","Finance / Accounting","Marketing / Digital Marketing","Sales / Customer Service","Graphic Design / UI-UX"];
let results=[];
function playSound(type){ if(type==='accept') document.getElementById('soundAccept').play(); if(type==='reject') document.getElementById('soundReject').play(); }
function evaluateCV(text){ let score=Math.floor(Math.random()*10)+1; let accept=score>=5; let strongestSkill="Problem Solving"; let specialty=specialties[Math.floor(Math.random()*specialties.length)]; return {score,accept,strongestSkill,specialty}; }
async function extractTextFromPDF(file){ const arrayBuffer=await file.arrayBuffer(); const pdf=await pdfjsLib.getDocument({data:arrayBuffer}).promise; let fullText=""; for(let i=1;i<=pdf.numPages;i++){ const page=await pdf.getPage(i); const txt=await page.getTextContent(); fullText+=txt.items.map(t=>t.str).join(" ")+" "; } return fullText; }
async function analyzeBatch(){
    if(!cookiesAccepted){ alert("Please accept cookies first."); return;}
    const files=document.getElementById('pdfFiles').files;
    if(files.length===0){ alert("Select at least one PDF CV."); return;}
    document.getElementById('loader').style.display='block';
    document.getElementById('resultsCards').innerHTML="";
    results=[];
    for(const file of files){
        const text=await extractTextFromPDF(file);
        const res=evaluateCV(text);
        results.push({name:file.name,phone:"+96112345678",...res});
        const card=document.createElement('div'); 
        card.className='card show '+(res.accept?'accepted':'rejected');
        card.innerHTML=`<h3>${file.name}</h3>
        <div class="phone">${"+96112345678"}</div>
        <div class="specialty">Specialty: ${res.specialty}</div>
        <div class="strongSkill">Strongest Skill: ${res.strongestSkill}</div>
        <div class="score">Score: ${res.score}/10</div>
        <div class="status ${res.accept?'accept':'reject'}">${res.accept?'Accepted':'Rejected'}</div>`;
        document.getElementById('resultsCards').appendChild(card);
        playSound(res.accept?'accept':'reject');
        await new Promise(r=>setTimeout(r,500));
    }
    document.getElementById('loader').style.display='none';
    document.getElementById('downloadExcel').style.display='inline-block';
}
function downloadExcel(){
    const wb=XLSX.utils.book_new();
    const ws_data=[["Name","Phone","Specialty","Strongest Skill","Score","Status"]];
    results.forEach(r=>{ws_data.push([r.name,r.phone,r.specialty,r.strongestSkill,r.score,r.accept?'Accepted':'Rejected']);});
    const ws=XLSX.utils.aoa_to_sheet(ws_data);
    XLSX.utils.book_append_sheet(wb,ws,"Results");
    XLSX.writeFile(wb,"CV_Analysis.xlsx");
}
</script>
</body>
</html>
