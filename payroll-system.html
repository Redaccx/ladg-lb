<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨</title>
<style>
body{font-family:"Cairo","Segoe UI",Tahoma,sans-serif;background:#f6f7fb;margin:0;padding:10px;color:#222}
.container{max-width:1000px;margin:0 auto;background:#fff;padding:15px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,0.08);display:none;}
h1{text-align:center;color:#C1272D;margin:0 0 12px;font-size:1.4rem}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px;margin-top:10px}
label{display:block;margin-bottom:5px;font-weight:600;font-size:14px}
input,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:6px;font-size:14px}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
button{background:#C1272D;color:#fff;border:none;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700;font-size:14px;flex:1}
button.ghost{background:#fff;color:#C1272D;border:2px solid #C1272D}
.result{margin-top:16px;padding:12px;border-radius:8px;background:#fafafa;border:1px solid #eee}
.row{display:flex;justify-content:space-between;gap:12px;padding:6px 0;border-bottom:1px dashed #eee;font-size:14px}
.row:last-child{border-bottom:none}
table{width:100%;border-collapse:collapse;margin-top:14px;font-size:13px}
th,td{padding:8px;border:1px solid #eee;text-align:center}
.delete-btn{background:red;color:white;padding:4px 8px;border:none;border-radius:4px;cursor:pointer}
.edit-btn{background:orange;color:white;padding:4px 8px;border:none;border-radius:4px;cursor:pointer}
.table-wrapper{overflow-x:auto}
#loginBox{max-width:400px;margin:20px auto;text-align:center;}
#loginBox input{width:60%;padding:8px;margin:6px 0;}
#loginBox button{width:48%;margin:4px 1%;padding:10px;}
.password-toggle{margin-top:4px;background:#eee;color:#222;padding:4px 8px;border:none;border-radius:4px;cursor:pointer;font-size:12px;width:100%;}
.search-box{margin:15px 0;text-align:right}
#welcomeNotice{
  display:none; position:fixed; top:50%; left:50%;
  transform:translate(-50%, -50%) scale(0.5);
  width:320px;background:#fff;box-shadow:0 2px 15px rgba(0,0,0,0.3);
  border-radius:10px;padding:20px;z-index:9999;text-align:center;color:#333;
  opacity:0; transition: all 0.4s ease;
}
#welcomeNotice.show{opacity:1; transform:translate(-50%, -50%) scale(1);}
#welcomeNotice h3{margin:0 0 10px 0;color:#C1272D;font-size:18px;}
#welcomeNotice p{margin:0;font-size:14px;line-height:1.5;}
#welcomeNotice button#contactBtn{margin-top:10px;padding:8px 14px;background:#25D366;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:14px;}
#welcomeNotice button#closeNotice{position:absolute;top:1px;left:170px;background:transparent;border:none;font-size:20px;cursor:pointer;color:red;}
@media (max-width:600px){.row{flex-direction:column;align-items:flex-start;font-size:13px}.actions{flex-direction:column}button{flex:unset;width:100%}h1{font-size:1.2rem}.container{padding:10px}#welcomeNotice{width:90%;}}
</style>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="loginBox">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input id="email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button id="togglePassword" class="password-toggle">Ø¹Ø±Ø¶ / Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
  <div>
    <button id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
    <button id="resetPassBtn" class="ghost">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</button>
  </div>
  <p id="loginMsg" style="color:red;font-size:13px"></p>
</div>

<!-- Ø§Ù„Ù†Ø¸Ø§Ù… -->
<div class="container">
<h1>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ§Ù„Ø±ÙˆØ§ØªØ¨</h1>
<div style="text-align:right;margin-bottom:10px;">
  <button id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<div class="grid">
  <div>
    <label>Ø§Ù„Ù…ÙˆØ¸Ù</label>
    <select id="empSelect"></select>
    <button id="addEmpBtn" class="ghost">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù</button>
    <button id="deleteEmpBtn" class="ghost">ğŸ—‘ Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù</button>
    <label class="small">Ø§Ù„ÙˆØ¸ÙŠÙØ©</label>
    <input id="empJob" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª">
  </div>
  <div>
    <label>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</label>
    <input id="baseSalary" type="number" min="0" step="0.01">
    <label class="small">Ø£ÙŠØ§Ù… Ø§Ù„Ø´Ù‡Ø±</label>
    <input id="daysInPeriod" type="number" value="30" min="1">
  </div>
  <div>
    <label>Ø£ÙŠØ§Ù… Ø§Ù„Ø­Ø¶ÙˆØ±</label>
    <input id="daysWorked" type="number" value="30" min="0">
    <label class="small">Ø³Ø§Ø¹Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
    <input id="overtimeHours" type="number" value="0" min="0">
  </div>
  <div>
    <label>Ø£Ø¬Ø± Ø§Ù„Ø³Ø§Ø¹Ø© Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</label>
    <input id="overtimeRate" type="number" value="0" min="0" step="0.01">
    <label class="small">Ù…ÙƒØ§ÙØ¢Øª</label>
    <input id="bonuses" type="number" value="0" min="0" step="0.01">
  </div>
  <div>
    <label>Ø³Ù„ÙØ©</label>
    <input id="advance" type="number" value="0" min="0" step="0.01">
    <label class="small">Ø®ØµÙˆÙ…Ø§Øª Ø£Ø®Ø±Ù‰</label>
    <input id="otherDeductions" type="number" value="0" min="0" step="0.01">
  </div>
  <div>
    <label>Ø§Ø³ØªÙ„Ù… Ø§Ù„Ù…Ø¹Ø§Ø´ØŸ</label>
    <select id="status">
      <option value="Ù„Ø§">Ù„Ø§</option>
      <option value="Ù†Ø¹Ù…">Ù†Ø¹Ù…</option>
    </select>
  </div>
</div>

<div class="actions">
  <button id="calcBtn">Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¢Ù†</button>
  <button id="recordBtn" class="ghost">ØªØ³Ø¬ÙŠÙ„</button>
  <button id="clearForm" class="ghost">ØªÙØ±ÙŠØº</button>
  <button id="exportExcel" class="ghost">ØªØµØ¯ÙŠØ± Excel</button>
</div>

<div class="result" id="resultBox" style="display:none">
  <div class="row"><div>Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ù†Ø³Ø¨ÙŠ</div><div id="proratedSalary">0</div></div>
  <div class="row"><div>Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©</div><div id="overtimeAmount">0</div></div>
  <div class="row"><div>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div><div id="grossBeforeDeductions">0</div></div>
  <div class="row"><div>Ø®ØµÙˆÙ…Ø§Øª</div><div id="advAndOthers">0</div></div>
  <div class="row"><div><strong>Ø§Ù„ØµØ§ÙÙŠ</strong></div><div id="netPay"><strong>0</strong></div></div>
</div>

<h3 style="margin-top:18px">Ø§Ù„Ø³Ø¬Ù„Ø§Øª</h3>
<div class="search-box">
  <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ ID">
</div>
<div class="table-wrapper">
<table id="recordsTable">
  <thead>
    <tr>
      <th>#</th><th>ID</th><th>Ø§Ù„Ù…ÙˆØ¸Ù</th><th>Ø§Ù„ÙˆØ¸ÙŠÙØ©</th><th>Ø§Ù„Ø±Ø§ØªØ¨</th>
      <th>Ø§Ù„Ø£ÙŠØ§Ù…</th><th>Ø§Ù„ØµØ§ÙÙŠ</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>ØªØ§Ø±ÙŠØ®</th><th>Ø®ÙŠØ§Ø±Ø§Øª</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>
</div>

<!-- Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
<div id="welcomeNotice">
  <button id="closeNotice">&times;</button>
  <h3>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ğŸ‘‹</h3>
  <p>
    ØªÙ… Ø¨Ø±Ù…Ø¬Ø© Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ÙˆØ§Ø³Ø·Ø© <strong>beweble</strong><br>
    Instagram: <a href="https://instagram.com/beweble" target="_blank" style="color:#C1272D;text-decoration:none;">@beweble</a><br>
    ğŸ“ Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø±: 
    <button id="contactBtn">Ø§ØªØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨</button>
  </p>
</div>

<script>
const firebaseConfig = {
 apiKey: "AIzaSyA6fS9KVSX_XVUyXVuG1Zr3xbJCWrakBaU",
 authDomain: "ladg-employee.firebaseapp.com",
 databaseURL: "https://ladg-employee-default-rtdb.firebaseio.com",
 projectId: "ladg-employee",
 storageBucket: "ladg-employee.firebasestorage.app",
 messagingSenderId: "406237266317",
 appId: "1:406237266317:web:73054658c737aa3906bdc4"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

// Ø§Ù„Ø¹Ù†Ø§ØµØ±
const loginBox=document.getElementById('loginBox');
const loginBtn=document.getElementById('loginBtn');
const logoutBtn=document.getElementById('logoutBtn');
const loginMsg=document.getElementById('loginMsg');
const togglePassword=document.getElementById('togglePassword');
const resetPassBtn=document.getElementById('resetPassBtn');
const appContainer=document.querySelector('.container');
const tbody=document.querySelector("#recordsTable tbody");
const welcomeNotice=document.getElementById("welcomeNotice");
const contactBtn=document.getElementById("contactBtn");
const closeNotice=document.getElementById("closeNotice");
const empSelect=document.getElementById("empSelect");
const addEmpBtn=document.getElementById("addEmpBtn");
const deleteEmpBtn=document.getElementById("deleteEmpBtn");

let editRow=null;
let employeesData = {}; // Ù„ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø¹ Ù…ÙØ§ØªÙŠØ­Ù‡Ù…

// Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨
function numberFmt(n){return parseFloat(n).toFixed(2);}
function calcPayroll(d){
  let base=parseFloat(d.baseSalary)||0;
  let daysIn=parseInt(d.daysInPeriod)||30;
  let days=parseInt(d.daysWorked)||0;
  let otH=parseFloat(d.overtimeHours)||0;
  let otR=parseFloat(d.overtimeRate)||0;
  let bonus=parseFloat(d.bonuses)||0;
  let adv=parseFloat(d.advance)||0;
  let other=parseFloat(d.otherDeductions)||0;
  let dailyRate = daysIn ? base/daysIn : 0;
  let prorated = dailyRate*days;
  let overtime = otH*otR;
  let gross = prorated+overtime+bonus;
  let deductions = adv+other;
  let net = gross-deductions;
  return {proratedSalary:prorated,overtimeAmount:overtime,gross:gross,advAndOthers:deductions,net:net};
}
function readForm(){return{
  empId: empSelect.value,
  empName: empSelect.selectedOptions[0]?.text.split("(")[0].trim()||'',
  empJob: document.getElementById('empJob').value,
  baseSalary: document.getElementById('baseSalary').value,
  daysInPeriod: document.getElementById('daysInPeriod').value,
  daysWorked: document.getElementById('daysWorked').value,
  overtimeHours: document.getElementById('overtimeHours').value,
  overtimeRate: document.getElementById('overtimeRate').value,
  bonuses: document.getElementById('bonuses').value,
  advance: document.getElementById('advance').value,
  otherDeductions: document.getElementById('otherDeductions').value,
  status: document.getElementById('status').value
};}
function showResult(r){
  document.getElementById('resultBox').style.display='block';
  document.getElementById('proratedSalary').innerText=numberFmt(r.proratedSalary);
  document.getElementById('overtimeAmount').innerText=numberFmt(r.overtimeAmount);
  document.getElementById('grossBeforeDeductions').innerText=numberFmt(r.gross);
  document.getElementById('advAndOthers').innerText=numberFmt(r.advAndOthers);
  document.getElementById('netPay').innerText=numberFmt(r.net);
}

// Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨
function showWelcomeNotice(){
  if(!sessionStorage.getItem('welcomeShown')){
    welcomeNotice.style.display="block";
    setTimeout(()=>welcomeNotice.classList.add("show"),10);
    sessionStorage.setItem('welcomeShown','true');
  }
}
contactBtn.onclick=()=>window.open("https://wa.me/81112046","_blank");
closeNotice.onclick=()=>welcomeNotice.style.display="none";

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬
auth.onAuthStateChanged(user=>{
  if(user){
    loginBox.style.display='none';
    appContainer.style.display='block';
    logoutBtn.style.display='inline-block';
    loadEmployees();
    loadRecords();
    showWelcomeNotice();
  } else {
    loginBox.style.display='block';
    appContainer.style.display='none';
    logoutBtn.style.display='none';
  }
});

loginBtn.onclick=()=>{
  const email=document.getElementById('email').value;
  const password=document.getElementById('password').value;
  auth.signInWithEmailAndPassword(email,password)
    .then(()=>loginMsg.innerText='')
    .catch(err=>loginMsg.innerText=err.message);
};
logoutBtn.onclick=()=>auth.signOut();

resetPassBtn.onclick=()=>{
  const email=document.getElementById('email').value;
  if(!email){loginMsg.innerText='ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£ÙˆÙ„Ø§Ù‹'; return;}
  auth.sendPasswordResetEmail(email)
    .then(()=>{loginMsg.style.color='green';loginMsg.innerText='ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ';})
    .catch(err=>{loginMsg.style.color='red';loginMsg.innerText=err.message;});
};

togglePassword.onclick=()=>{
  const passField=document.getElementById('password');
  passField.type=(passField.type==='password'?'text':'password');
};

// Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†
function loadEmployees(){
  empSelect.innerHTML='';
  employeesData = {};
  db.ref('employees').once('value', snapshot => {
    snapshot.forEach(child => {
      const e = child.val();
      const key = child.key;
      employeesData[key] = e;
      let opt = document.createElement("option");
      opt.value = key; 
      opt.textContent = `${e.name} (${e.empId})`;
      empSelect.appendChild(opt);
    });
  });
}

addEmpBtn.onclick = () => {
  const name = prompt("Ø§Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯:");
  if (!name) return;
  const empId = prompt("Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… ID Ù„Ù„Ù…ÙˆØ¸Ù:");
  if (!empId) { alert("ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… ID Ù„Ù„Ù…ÙˆØ¸Ù!"); return; }

  const newKey = db.ref('employees').push().key;
  db.ref('employees/' + newKey).set({ name, empId }).then(() => {
    loadEmployees(); 
    alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù: ${name} Ø¨Ø±Ù‚Ù… ID: ${empId}`);
  });
};

deleteEmpBtn.onclick = () => {
  const key = empSelect.value;
  if (key && confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¸ÙØŸ")) {
    db.ref('employees/' + key).remove().then(() => {
      db.ref('payrolls').orderByChild('empId').equalTo(employeesData[key].empId)
        .once('value', snap => {
          snap.forEach(child => db.ref('payrolls/' + child.key).remove());
        });
      loadEmployees();
    });
  }
};

// Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø±ÙˆØ§ØªØ¨
function addRecord(data){
  const result=calcPayroll(data);
  const record={...data,net:result.net,date:new Date().toLocaleString()};
  const newKey=db.ref('payrolls').push().key;
  db.ref('payrolls/'+newKey).set(record);
  loadRecords();
}
function loadRecords(){
  tbody.innerHTML='';
  db.ref('payrolls').once('value',snapshot=>{
    let i=1;
    snapshot.forEach(child=>{
      const r=child.val();
      const row=document.createElement("tr");
      row.dataset.key=child.key;
      row.innerHTML=`<td>${i++}</td>
        <td>${r.empId}</td>
        <td>${r.empName}</td>
        <td>${r.empJob}</td>
        <td>${numberFmt(r.baseSalary)}</td>
        <td>${r.daysWorked}</td>
        <td>${numberFmt(r.net)}</td>
        <td>${r.status}</td>
        <td>${r.date}</td>
        <td>
          <button class="edit-btn">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="delete-btn">Ø­Ø°Ù</button>
        </td>`;
      tbody.appendChild(row);

      row.querySelector('.delete-btn').onclick=()=>{db.ref('payrolls/'+child.key).remove();loadRecords();}
      row.querySelector('.edit-btn').onclick=()=>{
        editRow=child.key;
        document.getElementById('empJob').value=r.empJob;
        document.getElementById('baseSalary').value=r.baseSalary;
        document.getElementById('daysInPeriod').value=r.daysInPeriod;
        document.getElementById('daysWorked').value=r.daysWorked;
        document.getElementById('overtimeHours').value=r.overtimeHours;
        document.getElementById('overtimeRate').value=r.overtimeRate;
        document.getElementById('bonuses').value=r.bonuses;
        document.getElementById('advance').value=r.advance;
        document.getElementById('otherDeductions').value=r.otherDeductions;
        document.getElementById('status').value=r.status;
        empSelect.value=r.empId;
      }
    });
  });
}

// Ø­Ø³Ø§Ø¨ + ØªØ³Ø¬ÙŠÙ„
document.getElementById('calcBtn').onclick=()=>{
  const data=readForm();
  showResult(calcPayroll(data));
};
document.getElementById('recordBtn').onclick=()=>{
  const data=readForm();
  if(editRow){
    const result=calcPayroll(data);
    db.ref('payrolls/'+editRow).update({...data,net:result.net,date:new Date().toLocaleString()});
    editRow=null;
  } else addRecord(data);
  document.getElementById('clearForm').click();
};
document.getElementById('clearForm').onclick=()=>{
  document.querySelectorAll('input').forEach(i=>i.value='');
  document.getElementById('status').value='Ù„Ø§';
  document.getElementById('resultBox').style.display='none';
};

// ØªØµØ¯ÙŠØ± Excel (CSV)
document.getElementById('exportExcel').onclick=()=>{
  let csv='ID,Ø§Ù„Ù…ÙˆØ¸Ù,Ø§Ù„ÙˆØ¸ÙŠÙØ©,Ø§Ù„Ø±Ø§ØªØ¨,Ø§Ù„Ø£ÙŠØ§Ù…,Ø§Ù„ØµØ§ÙÙŠ,Ø§Ù„Ø­Ø§Ù„Ø©,ØªØ§Ø±ÙŠØ®\n';
  tbody.querySelectorAll('tr').forEach(r=>{
    const cells=r.querySelectorAll('td');
    let row=[];
    for(let i=1;i<cells.length-1;i++) row.push(cells[i].innerText);
    csv+=row.join(',')+'\n';
  });
  const blob=new Blob([csv],{type:'text/csv'});
  const link=document.createElement('a');
  link.href=URL.createObjectURL(blob);
  link.download='payroll_records.csv';
  link.click();
};

// Ø§Ù„Ø¨Ø­Ø«
document.getElementById('searchInput').addEventListener('input',e=>{
  const q=e.target.value.toLowerCase();
  tbody.querySelectorAll('tr').forEach(row=>{
    const text=row.innerText.toLowerCase();
    row.style.display=text.includes(q)?'':'none';
  });
});
  window.addEventListener('DOMContentLoaded', () => {
    if (sessionStorage.getItem("mainAccess") !== "true") {
        window.location.href = "system"; 
        return;
    }

    // Ø¥Ø°Ø§ Ø£ÙˆÙ„ Ù…Ø±Ø© ÙŠÙØªØ­ â†’ ØµÙØ­Ø© Ù…Ù‚ÙÙˆÙ„Ø©
    if (!sessionStorage.getItem("refreshedOnce")) {
        sessionStorage.setItem("refreshedOnce", "true");
        document.body.innerHTML = "<h2 style='text-align:center;margin-top:50px;'>Reload the page to access Payroll System</h2>";
    } 
    // Ø¥Ø°Ø§ Ø¹Ù…Ù„ Refresh â†’ ÙŠØ¨ÙŠÙ† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ
});

</script>
</body>
</html>
