<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: #f4f6f9;
      color: #333;
      padding: 0 10px;
    }

    .container {
      max-width: 800px;
      margin: 20px auto 50px auto;
      background: #fff;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    h1, h2, h3 {
      text-align: center;
    }

    input, select, button {
      padding: 8px;
      margin: 6px 0;
      width: 100%;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 15px;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }

    input:focus, select:focus {
      border-color: #007bff;
      outline: none;
    }

    button {
      background: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background: #0056b3;
    }

    .sale-item {
      background: #fafafa;
      padding: 12px 15px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 14px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }

    .sale-info {
      flex: 1;
      padding-right: 10px;
      word-break: break-word;
    }

    .btn-group button {
      margin-left: 6px;
      padding: 6px 10px;
      font-size: 13px;
      border-radius: 4px;
    }

    .print-btn {
      background-color: #28a745;
    }

    .print-btn:hover {
      background-color: #1e7e34;
    }

    .delete-btn {
      background-color: #dc3545;
    }

    .delete-btn:hover {
      background-color: #a71d2a;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .hidden {
      display: none;
    }

    .stats {
      background: #f1f1f1;
      padding: 15px;
      margin-top: 25px;
      border-radius: 5px;
      text-align: center;
      font-size: 15px;
    }

    /* Responsive */
    @media(max-width: 480px) {
      .sale-item {
        flex-direction: column;
        align-items: flex-start;
      }
      .btn-group {
        margin-top: 8px;
        width: 100%;
        display: flex;
        justify-content: flex-start;
      }
      .btn-group button {
        margin-left: 0;
        margin-right: 8px;
        flex: 1;
      }
    }
  </style>
</head>
<body>

  <div class="container" id="loginBox">
    <h1>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h1>
    <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <p>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†: Ø±Ø¶Ø§(123)ØŒ Ø­Ø³Ù†(456)ØŒ Ø¹Ù„ÙŠ(789)</p>
  </div>

  <div class="container hidden" id="mainBox">
    <div class="topbar">
      <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ <strong id="userWelcome"></strong></span>
      <div>
        <button onclick="logout()" style="background:#6c757d; margin-left: 10px;">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        <button onclick="clearAll()" style="background:#dc3545;">ğŸ—‘ Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
      </div>
    </div>

    <h2>Ø¥Ø¶Ø§ÙØ© Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹</h2>
    <select id="type" onchange="toggleFields()">
      <option value="Ù…ÙˆÙ‚Ø¹">Ù…ÙˆÙ‚Ø¹</option>
      <option value="Ø³ÙˆØ´Ø§Ù„">Ø®Ø¯Ù…Ø§Øª Ø³ÙˆØ´Ø§Ù„ Ù…ÙŠØ¯ÙŠØ§</option>
      <option value="ØªØ·Ø¨ÙŠÙ‚">ØªØ·Ø¨ÙŠÙ‚</option>
    </select>

    <input type="text" id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¹Ù…Ù„ÙŠØ©" />
    <input type="number" id="price" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±" />

    <input type="text" id="link" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ (Ù„Ù„Ù…ÙˆØ§Ù‚Ø¹ ÙÙ‚Ø·)" />

    <select id="socialType" class="hidden">
      <option>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø³Ø§Ø¨ Ù…Ù‡ÙƒØ±</option>
      <option>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø³Ø§Ø¨ Ù…Ø¨Ù†Ø¯</option>
      <option>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø³Ø§Ø¨ Ù…Ø¹Ø·Ù„</option>
      <option>Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø³Ø§Ø¨ Ù…Ø®ÙÙŠ</option>
      <option>ØºÙŠØ± Ø°Ù„Ùƒ</option>
    </select>

    <select id="paid">
      <option value="Ù…Ø¯ÙÙˆØ¹">Ù…Ø¯ÙÙˆØ¹</option>
      <option value="ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹">ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹</option>
    </select>

    <button onclick="addSale()">â• Ø¥Ø¶Ø§ÙØ©</button>

    <h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
    <input type="text" id="search" placeholder="Ø¨Ø­Ø«..." oninput="renderSales()" />

    <ul id="salesList"></ul>

    <div class="stats" id="stats">
      <h3>Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h3>
      <div>Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹: <span id="siteCount">0</span></div>
      <div>Ø¹Ø¯Ø¯ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³ÙˆØ´Ø§Ù„: <span id="socialCount">0</span></div>
      <div>Ø¹Ø¯Ø¯ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª: <span id="appCount">0</span></div>
      <div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹: $<span id="totalPaid">0</span></div>
      <div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØºÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹: $<span id="totalUnpaid">0</span></div>
    </div>
  </div>

<script>
  const users = {
    "Ø±Ø¶Ø§": "123",
    "Ø­Ø³Ù†": "456",
    "Ø¹Ù„ÙŠ": "789"
  };

  let currentUser = "";
  let sales = [];

  function login() {
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();
    if(users[u] && users[u] === p) {
      currentUser = u;
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("mainBox").classList.remove("hidden");
      document.getElementById("userWelcome").textContent = u;
      loadSales();
      toggleFields();
    } else {
      alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
    }
  }

  function logout() {
    currentUser = "";
    sales = [];
    document.getElementById("loginBox").classList.remove("hidden");
    document.getElementById("mainBox").classList.add("hidden");
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
  }

  function toggleFields() {
    const type = document.getElementById("type").value;
    document.getElementById("link").classList.toggle("hidden", type !== "Ù…ÙˆÙ‚Ø¹");
    document.getElementById("socialType").classList.toggle("hidden", type !== "Ø³ÙˆØ´Ø§Ù„");
  }

  function addSale() {
    const type = document.getElementById("type").value;
    const title = document.getElementById("title").value.trim();
    const price = parseFloat(document.getElementById("price").value);
    const link = document.getElementById("link").value.trim();
    const paid = document.getElementById("paid").value;
    const socialType = document.getElementById("socialType").value;
    const date = new Date().toLocaleString();

    if (!title || isNaN(price)) {
      alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ø³Ø¹Ø± Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­");
      return;
    }

    let detail = `${title} - $${price.toFixed(2)} - ${paid} - ${date}`;
    if (type === "Ù…ÙˆÙ‚Ø¹") detail += ` - Ø±Ø§Ø¨Ø·: ${link}`;
    if (type === "Ø³ÙˆØ´Ø§Ù„") detail += ` - Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©: ${socialType}`;

    sales.push({type, detail, price, paid});
    saveSales();
    renderSales();
    clearInputs();
  }

  function clearInputs() {
    document.getElementById("title").value = "";
    document.getElementById("price").value = "";
    document.getElementById("link").value = "";
  }

  function saveSales() {
    localStorage.setItem(currentUser + "_sales", JSON.stringify(sales));
  }

  function loadSales() {
    sales = JSON.parse(localStorage.getItem(currentUser + "_sales") || "[]");
    renderSales();
  }

  // Ø­Ø°Ù Ø¹Ù…Ù„ÙŠØ© Ù…Ø­Ø¯Ø¯Ø©
  function deleteSale(index) {
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŸ")) {
      sales.splice(index, 1);
      saveSales();
      renderSales();
    }
  }

  function renderSales() {
    const list = document.getElementById("salesList");
    const searchTerm = document.getElementById("search").value.trim().toLowerCase();
    list.innerHTML = "";

    let countSite = 0, countSocial = 0, countApp = 0;
    let totalPaid = 0, totalUnpaid = 0;

    sales.forEach((sale, i) => {
      if (!sale.detail || typeof sale.detail !== "string" || !sale.detail.toLowerCase().includes(searchTerm)) return;

      if (sale.type === "Ù…ÙˆÙ‚Ø¹") countSite++;
      else if (sale.type === "Ø³ÙˆØ´Ø§Ù„") countSocial++;
      else if (sale.type === "ØªØ·Ø¨ÙŠÙ‚") countApp++;

      if (sale.paid === "Ù…Ø¯ÙÙˆØ¹") totalPaid += sale.price;
      else totalUnpaid += sale.price;

      const li = document.createElement("li");
      li.className = "sale-item";

      const infoDiv = document.createElement("div");
      infoDiv.className = "sale-info";
      infoDiv.textContent = `${sale.type} - ${sale.detail}`;

      const btnGroup = document.createElement("div");
      btnGroup.className = "btn-group";

      const btnPrint = document.createElement("button");
      btnPrint.textContent = "ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø©";
      btnPrint.className = "print-btn";
      btnPrint.onclick = () => printSale(sale);

      const btnDelete = document.createElement("button");
      btnDelete.textContent = "âŒ Ø­Ø°Ù";
      btnDelete.className = "delete-btn";
      btnDelete.onclick = () => deleteSale(i);

      btnGroup.appendChild(btnPrint);
      btnGroup.appendChild(btnDelete);

      li.appendChild(infoDiv);
      li.appendChild(btnGroup);

      list.appendChild(li);
    });

    document.getElementById("siteCount").textContent = countSite;
    document.getElementById("socialCount").textContent = countSocial;
    document.getElementById("appCount").textContent = countApp;
    document.getElementById("totalPaid").textContent = totalPaid.toFixed(2);
    document.getElementById("totalUnpaid").textContent = totalUnpaid.toFixed(2);
  }

  function printSale(sale) {
    const content = `
Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: ${sale.type}
Ø§Ù„ØªÙØ§ØµÙŠÙ„: ${sale.detail}
Ø§Ù„Ø³Ø¹Ø±: $${sale.price.toFixed(2)}
Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹: ${sale.paid}
    `;
    const win = window.open("", "Print", "width=600,height=400");
    win.document.write("<pre style='font-size:16px; font-family: Tahoma, sans-serif;'>" + content + "</pre>");
    win.document.close();
    win.focus();
    win.print();
    win.close();
  }

  function clearAll() {
    if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")) {
      sales = [];
      saveSales();
      renderSales();
    }
  }
</script>

</body>
</html>
